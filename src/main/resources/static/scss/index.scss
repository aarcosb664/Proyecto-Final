// Importar variables y mixins desde base
@use 'base' as *;
@use 'animations';

// Variables para animaciones
$border-radius: 0.375rem;
$border-width: 2px;
$flow-duration: 6s;
$hover-scale: 1.03;

// Mixin para el efecto border-flow
@mixin flow-border($color1, $color2) {
    --border-color-1: #{$color1};
    --border-color-2: #{$color2};
}

// Keyframes
@keyframes indexBorderFlow {
    from { left: -150%; }
    to   { left: 150%; }
}

@keyframes borderFlow {
    0%   { background-position: 200% 0%; }
    100% { background-position: 0% 0%; }
}

// Estilos de pÃ¡gina
.border-bottom-animated::after {
    content: '';
    display: block;
    margin-top: 8px;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, transparent, white, rgba(255, 255, 255, 0.5), transparent);
    background-size: 200% 100%;
    animation: indexBorderFlow 1.5s infinite linear;
    position: relative;
}

// Estilos de tarjetas animadas
.animated-card, 
.animated-card-blue, 
.animated-card-red, 
.animated-card-green, 
.animated-card-orange {
    background-color: transparent !important;
    border-color: rgba(255, 255, 255, 0.25) !important;
    
    &::before, &::after {
        z-index: 0 !important;
        opacity: 1 !important;
    }
    
    > * {
        z-index: 1 !important;
        position: relative !important;
    }
}

// Compatibilidad con clases antiguas
.animated-card { @extend .animated-card-blue; }
.animated-card-boss { @extend .animated-card-orange; }
.border-flow-boss { @extend .border-flow-orange; }

// Tarjeta clicable
.btn-custom {
    display: block;
    height: 100%;
    transition: transform 0.3s ease;
    
    &:hover {
        transform: scale(1.05);
        text-decoration: none !important;
    }
    
    &:active {
        transform: scale(0.95);
    }
}

// Tarjetas con border-flow
[class*="border-flow"] {
    &.card {
        position: relative;
        overflow: hidden;
        border: none;
        transition: transform 0.3s ease;
        
        &:hover {
            transform: scale($hover-scale);
        }
        
        // Pseudo-elemento para borde animado
        &:before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: $border-radius;
            padding: $border-width;
            background: linear-gradient(
                90deg, 
                var(--border-color-1) 0%,
                var(--border-color-2) 50%, 
                var(--border-color-1) 100%
            ) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            background-size: 200% 100%;
            animation: borderFlow $flow-duration linear infinite;
            z-index: 1;
        }
    }
}

// Colores de borde
.card {
    &.border-flow-blue:before   { @include flow-border($colorPrimario, $colorSecundario); }
    &.border-flow-red:before    { @include flow-border($colorRojo, $colorRojoSecundario); }
    &.border-flow-green:before  { @include flow-border($colorVerde, $colorVerdeSecundario); }
    &.border-flow-orange:before { @include flow-border($colorJefe, $colorJefeSecundario); }
}